<ngb-alert *ngIf="invalidRequest" type="danger" (close)="!invalidRequest"><span class="fade-in">Invalid Endpoint Request</span></ngb-alert>
<ngb-alert *ngIf="saved" type="success" (close)="!saved"><span class="fade-in">Saved!</span></ngb-alert>
<div class="container-fluid">
  <div class="row">
    <div class="col-md-6">
      <div class="btn-toolbar justify-content-end mb-2" role="toolbar">
        <button (click)="resetRequest()" class="btn btn-outline-secondary" ngbTooltip="Reset" placement="top" style="margin-right: 10px;"><i class="material-icons" style="font-size:16px;">refresh</i></button>
        <button class="btn btn-outline-secondary" style="margin-right: 10px" [disabled]="!isOwner()" (click)="save()" [hidden]="!user">Save</button>
        <button class="btn standardButton" (click)="sendRequest()" [disabled]="!user">Send Request<div class="d-inline ml-1" *ngIf="loading" [ngTemplateOutlet]="spinner"></div></button>
      </div>
      <app-endpoint-request [endpoint]="request"></app-endpoint-request>
    </div>
    <div class="col-md-6">
      <hr class="d-md-none">
      <app-endpoint-result [result]="response"></app-endpoint-result>
    </div>
  </div>
</div>

<ng-template #spinner>
  <svg class="lds-spinner" width="16px"  height="16px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid" style="background: none;"><g transform="rotate(0 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-2.3833333333333333s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(30 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-2.1666666666666665s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(60 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-1.9500000000000002s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(90 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-1.7333333333333334s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(120 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-1.5166666666666666s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(150 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-1.3s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(180 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-1.0833333333333333s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(210 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-0.8666666666666667s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(240 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-0.65s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(270 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-0.43333333333333335s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(300 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="-0.21666666666666667s" repeatCount="indefinite"></animate>
    </rect>
  </g><g transform="rotate(330 50 50)">
    <rect x="47" y="22" rx="9.4" ry="4.4" width="6" height="16" fill="#bd4030">
      <animate attributeName="opacity" values="1;0" keyTimes="0;1" dur="2.6s" begin="0s" repeatCount="indefinite"></animate>
    </rect>
  </g></svg>
</ng-template>
